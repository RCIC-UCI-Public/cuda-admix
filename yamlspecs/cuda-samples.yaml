!include cuda-toolkit.yaml
---
- package: CUDA toolkit samples 
  name: "{{basename}}-samples"
  description: >
    CUDA Toolkit Version {{version}} samples 
  contents: cuda-samples 
  src_tarball: 
  utilities_dir: cuda-samples/1_Utilities
  utilities:  bandwidthTest deviceQueryDrv topologyQuery deviceQuery   p2pBandwidthLatencyTest UnifiedMemoryPerf
  build:
    configure: echo no configure required 
    modules:
      - "{{cuda.name}}/{{cuda.version}}"
    pkgmake: >
      mkdir {{name}};
      cp -R {{extractDir}}/{{contents}} {{name}};
      cd {{name}}/{{utilities_dir}};
      for p in {{utilities}}; do (cd $$p; make; /bin/rm $$p); done
  install:
    makeinstall: >
      mv {{name}}/{{contents}} $(ROOT){{root}}
  requires: 
    - "{{basename}}_{{version}}"
  files:
    - "{{root}}/{{contents}}"
  rpm: !include rpm.extras.yaml
