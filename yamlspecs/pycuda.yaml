!include rcic-package.yaml
!include rpm.yaml
---
- name: pycuda 
  release: 4
  versions: !include versions.yaml
  version: "{{versions.pycuda}}"
  cuda_version: "{{versions.cuda.version}}"
  python_version: "{{versions.python3}}"
  python_major: "{{versions.python3_major}}"
  compiler: "{{versions.compiler.name}}"
  compiler_version: "{{versions.compiler.version}}"
  pkgname: "python_{{python_version}}-{{name}}"
  parent: "{{root}}"
  root: "{{pkg_defaults.app_path}}/python/{{python_version}}"
  pypiurl: https://files.pythonhosted.org/packages/{{versions.pycuda_hash}}
  vendor_source:  "{{pypiurl}}/{{src_tarball}}"
  description: |
     PyCUDA {[version}} lets you access Nvidiaâ€™s CUDA parallel computation API from Python.
  build:
    configure: ./configure.py
    configure_args: 
    modules: 
      - "python/{{python_version}}"
      - cuda/{{cuda_version}}
  install:
    makeinstall: python{{python_major}} setup.py install --root $(ROOT) --prefix {{root}}
  requires:
    - python_{{python_version}}
    - cuda-toolkit_{{cuda_version}}
